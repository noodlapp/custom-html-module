{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"React\"","webpack:///./src/index.js","webpack:///./node_modules/@noodl/noodl-sdk/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","React","Noodl","require","useRef","useEffect","useState","RenderContainer","props","divRef","parsedMarkup","setParsedMarkup","html","newHtml","templateStringAndValue","keys","forEach","replaceAll","runJs","current","htmlSlot","document","createRange","createContextualFragment","innerHTML","appendChild","className","style","dangerouslySetInnerHTML","__html","ref","InlineHtml","defineReactNode","displayName","docs","category","getReactComponent","inputProps","type","codeeditor","default","methods","setTemplateVariable","templateString","this","model","inputs","forceUpdate","registerInputIfNeeded","hasInput","startsWith","registerInput","set","substring","length","templateStrings","setup","context","graphModel","editorConnection","isRunningLocally","on","node","_managePortsForNode","getNodesWithType","_updatePorts","ports","parameters","matchAll","match","trim","propName","includes","push","group","plug","sendDynamicPorts","id","event","defineModule","reactNodes","nodes","_colors","defineNode","def","_def","displayNodeName","usePortAsLabel","useInputAsLabel","color","getInspectInfo","initialize","_outputs","outputs","_this","setOutputs","flagOutputDirty","clearWarnings","nodeScope","componentOwner","sendWarning","message","apply","undefined","_key","changed","signals","valueChangedToTrue","_fn","signal","scheduleAfterInputsHaveUpdated","prototypeExtensions","onNodeDeleted","_onNodeDeleted","__proto__","defineCollectionNode","assign","Items","Fetch","sendSignalOnOutput","a","fetch","defineModelNode","Id","Fetched","_object","_changeListener","off","_o","data","properties","inputCss","outputProps","frame"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = React;","const Noodl = require('@noodl/noodl-sdk')\nconst useRef = require('react').useRef\nconst useEffect = require('react').useEffect\nconst useState = require('react').useState\n\n// Handles if we want to run javascript\nfunction RenderContainer(props) {\n    const divRef = useRef(null)\n    const [parsedMarkup, setParsedMarkup] = useState()\n\n    // Parse markup\n    useEffect(() => {\n        if (!props.html) return\n\n        let newHtml = props.html\n\n        if (props.templateStringAndValue) {\n            Object.keys(props.templateStringAndValue).forEach((key) => {\n                newHtml = newHtml.replaceAll(\n                    key,\n                    props.templateStringAndValue[key] || ''\n                )\n            })\n        }\n\n        setParsedMarkup(newHtml)\n    }, [props])\n\n    // Inject JS in a hacky way to allow it to run\n    useEffect(() => {\n        if (!props.runJs || !divRef.current) return\n\n        const htmlSlot = document\n            .createRange()\n            .createContextualFragment(parsedMarkup)\n        divRef.current.innerHTML = ''\n        divRef.current.appendChild(htmlSlot)\n    }, [parsedMarkup, props.runJs])\n\n    return (\n        <div\n            className={props.className}\n            style={props.style}\n            dangerouslySetInnerHTML={\n                props.runJs ? null : { __html: parsedMarkup }\n            }\n            ref={divRef}\n        />\n    )\n}\n\nconst InlineHtml = Noodl.defineReactNode({\n    name: 'module.inlineHtml',\n    displayName: 'Custom HTML',\n    docs: 'https://docs.noodl.net/#/modules/custom-html/README.md',\n    category: 'Visual',\n\n    getReactComponent() {\n        return RenderContainer\n    },\n\n    inputProps: {\n        html: {\n            displayName: 'HTML',\n            type: { name: 'string', codeeditor: 'html' },\n            default: '',\n        },\n        runJs: {\n            displayName: 'Run inline JavaScript',\n            type: { name: 'boolean' },\n            default: false,\n        },\n    },\n\n    methods: {\n        setTemplateVariable: function (name, templateString, value) {\n            this.model.inputs[name] = value\n\n            if (!this.props.templateStringAndValue) {\n                this.props.templateStringAndValue = {}\n            }\n\n            this.props.templateStringAndValue[templateString] = value\n\n            this.forceUpdate()\n        },\n\n        registerInputIfNeeded: function (name) {\n            if (this.hasInput(name)) return\n\n            if (name.startsWith('prop-')) {\n                this.registerInput(name, {\n                    set: this.setTemplateVariable.bind(\n                        this,\n                        name.substring('prop-'.length),\n                        this.model.templateStrings[name]\n                    ),\n                })\n            }\n        },\n    },\n\n    setup(context, graphModel) {\n        if (\n            !context.editorConnection ||\n            !context.editorConnection.isRunningLocally()\n        ) {\n            return\n        }\n\n        function _managePortsForNode(node) {\n            function _updatePorts() {\n                const ports = []\n\n                if (node.parameters.html) {\n                    // TODO: Maybe find a better way of handling the strings\n                    // without having to reset them every time\n                    node.templateStrings = {}\n\n                    const regexp = /\\{{2}([^}]+)\\}{2}/g\n                    const matches = node.parameters.html.matchAll(regexp)\n\n                    for (match of matches) {\n                        const key = match[1].trim()\n                        const propName = `prop-${key}`\n                        const templateString = match[0]\n\n                        if (\n                            Object.keys(node.templateStrings).includes(propName)\n                        ) {\n                            continue\n                        }\n\n                        node.templateStrings[propName] = templateString\n\n                        ports.push({\n                            name: propName,\n                            displayName: key,\n                            group: 'Variables',\n                            type: '*',\n                            plug: 'input',\n                        })\n                    }\n\n                    context.editorConnection.sendDynamicPorts(node.id, ports)\n                }\n            }\n\n            _updatePorts()\n\n            node.on('parameterUpdated', (event) => {\n                _updatePorts()\n            })\n        }\n\n        graphModel.on('nodeAdded.module.inlineHtml', (node) => {\n            _managePortsForNode(node)\n        })\n\n        for (const node of graphModel.getNodesWithType(\n            'noodl.module.inlineHtml'\n        )) {\n            _managePortsForNode(node)\n        }\n    },\n})\n\nNoodl.defineModule({\n    reactNodes: [InlineHtml],\n    nodes: [],\n    setup() {\n        //this is called once on startup\n    },\n})\n","const _colors = {\n    \"purple\":\"component\",\n    \"green\":\"data\",\n    \"default\":\"default\",\n    \"grey\":\"default\"\n}\n\nNoodl.defineNode = function(def) {\n    const _def = {};\n\n    _def.name = def.name;\n    _def.displayNodeName = def.displayName;\n    _def.usePortAsLabel = def.useInputAsLabel;\n    _def.color = _colors[def.color || 'default'];\n    _def.category = def.category || 'Modules';\n    _def.getInspectInfo = def.getInspectInfo;\n    _def.docs = def.docs;\n    \n    _def.initialize = function() {\n        this.inputs = {};\n        var _outputs = this.outputs = {};\n        var _this = this;\n\n        // Function for quickly setting outputs\n        this.setOutputs = function(o) {\n            for(var key in o) {\n                _outputs[key] = o[key];\n                _this.flagOutputDirty(key);\n            }\n        }\n\n        // Sending warnings\n        this.clearWarnings = (function() {\n            if(this.context.editorConnection && this.nodeScope && this.nodeScope.componentOwner)\n                this.context.editorConnection.clearWarnings(this.nodeScope.componentOwner.name, this.id);\n        }).bind(this);\n\n        this.sendWarning = (function(name,message) {\n            if(this.context.editorConnection && this.nodeScope && this.nodeScope.componentOwner)\n                this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name, this.id, name, {\n                    message: message\n                });\n        }).bind(this);\n\n        if(typeof def.initialize === 'function')\n            def.initialize.apply(this);\n    }\n    _def.inputs = {};\n    _def.outputs = {};\n\n    for(var key in def.inputs) {\n        _def.inputs[key] = {\n            type:(typeof def.inputs[key] === 'object')?def.inputs[key].type:def.inputs[key],\n            displayName:(typeof def.inputs[key] === 'object')?def.inputs[key].displayName:undefined,\n            group:(typeof def.inputs[key] === 'object')?def.inputs[key].group:undefined,\n            default:(typeof def.inputs[key] === 'object')?def.inputs[key].default:undefined,\n            set:(function() { const _key = key; return function(value) {\n                this.inputs[_key] = value;\n                if(def.changed && typeof def.changed[_key] === 'function') {\n                    def.changed[_key].apply(this,[value]);\n                }\n            }})()\n        }\n    }\n\n    for(var key in def.signals) {\n        _def.inputs[key] = {\n            type:'signal',\n            displayName:(typeof def.signals[key] === 'object')?def.signals[key].displayName:undefined,\n            group:(typeof def.signals[key] === 'object')?def.signals[key].group:undefined,\n            valueChangedToTrue:(function() { const _key = key; return function() {\n                const _fn = (typeof def.signals[_key] === 'object')?def.signals[_key].signal:def.signals[_key]\n                if(typeof _fn === 'function') {\n                    this.scheduleAfterInputsHaveUpdated(() => {\n                        _fn.apply(this);\n                    }) \n                }\n            }})()\n        }\n    }\n\n    for(var key in def.outputs) {\n        if(def.outputs[key] === 'signal') {\n            _def.outputs[key] = {\n                type:'signal',\n            }\n        }\n        else {\n            _def.outputs[key] = {\n                type:(typeof def.outputs[key] === 'object')?def.outputs[key].type:def.outputs[key],\n                displayName:(typeof def.outputs[key] === 'object')?def.outputs[key].displayName:undefined,\n                group:(typeof def.outputs[key] === 'object')?def.outputs[key].group:undefined,\n                getter:(function() { const _key = key; return function() {\n                    return this.outputs[_key];\n                }})()\n            }\n        }\n    }\n\n    _def.methods = _def.prototypeExtensions = {};\n    for(var key in def.methods) {\n        _def.prototypeExtensions[key] = def.methods[key];\n    }\n    if(_def.methods.onNodeDeleted) { // Override the onNodeDeleted if required\n        _def.methods._onNodeDeleted = function() {\n            this.__proto__.__proto__._onNodeDeleted.call(this);\n            _def.methods.onNodeDeleted.value.call(this);\n        }\n    }\n\n    return {node:_def,setup:def.setup};\n}\n\nNoodl.defineCollectionNode = function(def) {\n    const _def = {\n        name:def.name,\n        category:def.category,\n        color:'data',\n        inputs:def.inputs,\n        outputs:Object.assign({\n            Items:'array',\n            'Fetch Started':'signal',\n            'Fetch Completed':'signal'\n        },def.outputs||{}),\n        signals:Object.assign({\n            Fetch:function() {\n                var _this = this;\n                this.sendSignalOnOutput('Fetch Started');\n                var a = def.fetch.call(this,function() {\n                    _this.sendSignalOnOutput('Fetch Completed');\n                });\n                this.setOutputs({\n                    Items:a\n                })\n            }\n        },def.signals||{})\n    }\n\n    return Noodl.defineNode(_def);\n}\n\nNoodl.defineModelNode = function(def) {\n    const _def = {\n        name:def.name,\n        category:def.category,\n        color:'data',\n        inputs:{\n            Id:'string'\n        },\n        outputs:{\n            Fetched:'signal'\n        },\n        changed:{\n            Id:function(value) {\n                if(this._object && this._changeListener)\n                    this._object.off('change',this._changeListener)\n                \n                this._object = Noodl.Object.get(value);\n                this._changeListener = (name,value) => {\n                    const _o = {}\n                    _o[name] = value;\n                    this.setOutputs(_o)\n                }\n                this._object.on('change',this._changeListener)\n\n                this.setOutputs(this._object.data);\n                this.sendSignalOnOutput('Fetched');\n            }\n        },\n        initialize:function() {\n\n        }\n    }\n\n    for(var key in def.properties) {\n        _def.inputs[key] = def.properties[key];\n        _def.outputs[key] = def.properties[key];\n        _def.changed[key] = (function() { const _key = key; return function(value) {\n            if(!this._object) return;\n            this._object.set(_key,value);\n        }})()\n    }\n \n    return Noodl.defineNode(_def);\n}\n\nNoodl.defineReactNode = function(def) {\n    var _def = Noodl.defineNode(def);\n\n    _def.node.getReactComponent = def.getReactComponent;\n    _def.node.inputProps = def.inputProps;\n    _def.node.inputCss = def.inputCss;\n    _def.node.outputProps = def.outputProps;\n    _def.node.setup = def.setup;\n    _def.node.frame = def.frame;\n\n    return _def.node;\n}\n\nmodule.exports = Noodl;"],"sourceRoot":""}